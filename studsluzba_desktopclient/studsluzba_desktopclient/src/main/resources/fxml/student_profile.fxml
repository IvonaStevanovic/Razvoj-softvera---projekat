package org.raflab.studsluzbadesktopclient.controllers;

        import javafx.fxml.FXML;
        import javafx.fxml.FXMLLoader;
        import javafx.scene.Node;
        import javafx.scene.Parent;
        import javafx.scene.layout.StackPane;
        import org.raflab.studsluzbadesktopclient.ContextFXMLLoader;

        import java.io.IOException;

        public class MainWindowController {

        @FXML
        private StackPane contentArea;

        private static MainWindowController instance;

        public MainWindowController() {
        instance = this;
        }

        public static MainWindowController getInstance() {
        return instance;
        }

        @FXML
        public void initialize() {
        // Na početku možemo učitati pretragu ili ostaviti prazno
        openSearchStudent();
        }

        // --- Navigacija ---

        /**
        * Glavna metoda za promenu ekrana.
        * Kasnije ćemo ovde dodati HistoryManager.record() za KORAK 2.
        */
        public void setView(Node node) {
        contentArea.getChildren().clear();
        contentArea.getChildren().add(node);
        }

        // --- Akcije iz Menija ---

        @FXML
        public void handleSearchStudent() {
        openSearchStudent();
        }

        @FXML
        public void handleNewStudent() {
        // Implementacija za novi student view
        System.out.println("Otvaranje forme za novog studenta...");
        }

        // --- Helperi za učitavanje ---

        private void openSearchStudent() {
        try {
        // Učitavamo tvoj postojeći searchStudent.fxml (ili ćemo ga unaprediti kasnije)
        FXMLLoader loader = ContextFXMLLoader.getLoader("searchStudent.fxml");
        Parent view = loader.load();
        setView(view);
        } catch (IOException e) {
        e.printStackTrace();
        }
        }

        /**
        * Metoda koju ćemo zvati kada kliknemo na studenta u pretrazi
        */
        public void openStudentProfile(Long studentId) {
        try {
        FXMLLoader loader = ContextFXMLLoader.getLoader("student_profile.fxml");
        Parent view = loader.load();

        StudentProfileController controller = loader.getController();
        // Ovde ćemo kasnije pozvati servis da učita podatke
        controller.loadStudentData(studentId);

        setView(view);
        } catch (IOException e) {
        e.printStackTrace();
        }
        }
        }